import { text, image, barcodes } from "@pdfme/schemas";
import { generate } from "@pdfme/generator";

export const boleta = async (
  medio_pago: string,
  elementos: string,
  monto: string
) => {
  const template = {
    schemas: [
      {
        field1: {
          type: "text",
          content: "BOLETA ELECTRONICA",
          position: {
            x: 45.63,
            y: 26.36,
          },
          width: 118.56,
          height: 23.76,
          rotate: 0,
          alignment: "center",
          verticalAlignment: "top",
          fontSize: 30,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
        "field1 copy": {
          type: "text",
          content: "Elementos",
          position: {
            x: 4.56,
            y: 104.88,
          },
          width: 118.56,
          height: 23.76,
          rotate: 0,
          alignment: "left",
          verticalAlignment: "top",
          fontSize: 20,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
        "field1 copy 2": {
          type: "text",
          content: "Monto",
          position: {
            x: 120.2,
            y: 251.71,
          },
          width: 33.63,
          height: 23.76,
          rotate: 0,
          alignment: "left",
          verticalAlignment: "top",
          fontSize: 20,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
        "field1 copy 3": {
          type: "text",
          content: "Medio pago:",
          position: {
            x: 4.52,
            y: 64.6,
          },
          width: 75.96,
          height: 23.76,
          rotate: 0,
          alignment: "left",
          verticalAlignment: "top",
          fontSize: 20,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
        medio_pago: {
          type: "text",
          content: "",
          position: {
            x: 47.26,
            y: 60.22,
          },
          width: 61.93,
          height: 18.2,
          rotate: 0,
          alignment: "left",
          verticalAlignment: "top",
          fontSize: 20,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
        elementos: {
          type: "text",
          content: "",
          position: {
            x: 13.92,
            y: 127.69,
          },
          width: 185.76,
          height: 117.69,
          rotate: 0,
          alignment: "left",
          verticalAlignment: "top",
          fontSize: 20,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
        monto: {
          type: "text",
          content: "",
          position: {
            x: 154.15,
            y: 250.99,
          },
          width: 45,
          height: 10,
          rotate: 0,
          alignment: "left",
          verticalAlignment: "top",
          fontSize: 20,
          lineHeight: 1,
          characterSpacing: 0,
          fontColor: "#000000",
          backgroundColor: "",
          opacity: 1,
          strikethrough: false,
          underline: false,
          required: false,
          readOnly: false,
          fontName: "Roboto",
        },
      },
    ],
    basePdf:
      "data:application/pdf;base64,JVBERi0xLjcKJcOkw7zDtsOfCjIgMCBvYmoKPDwvTGVuZ3RoIDMgMCBSL0ZpbHRlci9GbGF0ZURlY29kZT4+CnN0cmVhbQp4nDPQM1Qo59J3LCrJTEtMLlFw8nXmKlQwUDDQMzCyUDC1NNUzMjdVsDAx1LMwM1QoSuUK11LI43IFqgpUAAC+aw3mCmVuZHN0cmVhbQplbmRvYmoKCjMgMCBvYmoKNjcKZW5kb2JqCgo2IDAgb2JqCjw8Cj4+CmVuZG9iagoKNyAwIG9iago8PAovRm9udCA2IDAgUgovUHJvY1NldFsvUERGL1RleHRdCj4+CmVuZG9iagoKMSAwIG9iago8PC9UeXBlL1BhZ2UvUGFyZW50IDUgMCBSL1Jlc291cmNlcyA3IDAgUi9NZWRpYUJveFswIDAgNTk1LjMwMzkzNzAwNzg3NCA4NDEuODg5NzYzNzc5NTI4XS9Db250ZW50cyAyIDAgUj4+CmVuZG9iagoKNCAwIG9iago8PC9UeXBlL1N0cnVjdEVsZW0KL1MvRG9jdW1lbnQKL1AgOCAwIFIKL1BnIDEgMCBSCj4+CmVuZG9iagoKOCAwIG9iago8PC9UeXBlL1N0cnVjdFRyZWVSb290Ci9QYXJlbnRUcmVlIDkgMCBSCi9LWzQgMCBSICBdCj4+CmVuZG9iagoKOSAwIG9iago8PC9OdW1zWwpdPj4KZW5kb2JqCgo1IDAgb2JqCjw8L1R5cGUvUGFnZXMKL1Jlc291cmNlcyA3IDAgUgovS2lkc1sgMSAwIFIgXQovQ291bnQgMT4+CmVuZG9iagoKMTAgMCBvYmoKPDwvVHlwZS9DYXRhbG9nL1BhZ2VzIDUgMCBSCi9QYWdlTW9kZS9Vc2VPdXRsaW5lcwovT3BlbkFjdGlvblsxIDAgUiAvWFlaIG51bGwgbnVsbCAwXQovU3RydWN0VHJlZVJvb3QgOCAwIFIKL0xhbmcoZXMtUEUpCi9NYXJrSW5mbzw8L01hcmtlZCB0cnVlPj4KPj4KZW5kb2JqCgoxMSAwIG9iago8PC9DcmVhdG9yPEZFRkYwMDU3MDA3MjAwNjkwMDc0MDA2NTAwNzI+Ci9Qcm9kdWNlcjxGRUZGMDA0QzAwNjkwMDYyMDA3MjAwNjUwMDRGMDA2NjAwNjYwMDY5MDA2MzAwNjUwMDIwMDAzMjAwMzQwMDJFMDAzMj4KL0NyZWF0aW9uRGF0ZShEOjIwMjQwODI5MDEwMTAwLTA1JzAwJyk+PgplbmRvYmoKCnhyZWYKMCAxMgowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAyNTIgMDAwMDAgbiAKMDAwMDAwMDAxOSAwMDAwMCBuIAowMDAwMDAwMTU3IDAwMDAwIG4gCjAwMDAwMDAzNzUgMDAwMDAgbiAKMDAwMDAwMDU0NSAwMDAwMCBuIAowMDAwMDAwMTc2IDAwMDAwIG4gCjAwMDAwMDAxOTggMDAwMDAgbiAKMDAwMDAwMDQ0NCAwMDAwMCBuIAowMDAwMDAwNTE2IDAwMDAwIG4gCjAwMDAwMDA2MTggMDAwMDAgbiAKMDAwMDAwMDc4NSAwMDAwMCBuIAp0cmFpbGVyCjw8L1NpemUgMTIvUm9vdCAxMCAwIFIKL0luZm8gMTEgMCBSCi9JRCBbIDw4NENFRjNFMkYxQzcxREEzM0I1MDJGRkZGMzREOUM4Rj4KPDg0Q0VGM0UyRjFDNzFEQTMzQjUwMkZGRkYzNEQ5QzhGPiBdCi9Eb2NDaGVja3N1bSAvMTJENTA0MDU5ODJBOTREOUU2NjUzNzEwRkZGQUVBRjAKPj4Kc3RhcnR4cmVmCjk2NAolJUVPRgo=",
    pdfmeVersion: "4.0.0",
  };
  const plugins = { text, image, qrcode: barcodes.qrcode };
  const inputs = [
    {
      field1: "BOLETA ELECTRONICA",
      "field1 copy": "Elementos",
      "field1 copy 2": "Monto",
      "field1 copy 3": "Medio pago:",
      medio_pago: medio_pago,
      elementos: elementos,
      monto: monto,
    },
  ];

  const pdf = await generate({ template, plugins, inputs });

  // Node.js
  // fs.writeFileSync(path.join(__dirname, 'test.pdf'), pdf);

  // Browser
  const blob = new Blob([pdf.buffer], { type: "application/pdf" });
  window.open(URL.createObjectURL(blob));
};
